//@ui5-bundle DIOR/FR/zfrswbdioovt/Component-preload.js
jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"DIOR/FR/zfrswbdioovt/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","DIOR/FR/zfrswbdioovt/model/models"],function(e,t,i){"use strict";return e.extend("DIOR.FR.zfrswbdioovt.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(i.createDeviceModel(),"device")}})});
},
	"DIOR/FR/zfrswbdioovt/control/IconText.js":function(){sap.ui.define(["sap/ui/core/Control"],e=>{"use strict";return e.extend("DIOR.FR.zfrswbdioovt.control.ProductRating",{metadata:{aggregations:{_icon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},_text:{type:"sap.m.Text",multiple:false,visibility:"hidden"}}},init(){},renderer(e,i){}})});
},
	"DIOR/FR/zfrswbdioovt/controller/Main.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageStrip","sap/ui/core/Core","sap/m/MessageBox"],function(e,t,l,s,n,o,i){"use strict";var r=[];var a={};var c={};var d={};var u=[];var m={};var f=false;var h=false;var E=false;var p={};return e.extend("DIOR.FR.zfrswbdioovt.controller.Main",{onInit:function(){this._apElementCounter=0;this._reElementCounter=0;this._ApSelectedAll=false;this._ReSelectedAll=false},onSelectAllEmp:function(e){const t="/OvertimeEventSet";if(!f){e.getSource().setText("Désélectionner tous les employés");this.byId("EmployeeListCombo").setVisible(false);f=true;this.byId("OvtEventsTab").bindItems({path:t,model:"employees",template:this.byId("TableItemTemplate"),templateShareable:true})}else{e.getSource().setText("Sélectionner tous les employés");this.byId("EmployeeListCombo").setVisible(true);f=false;this.byId("OvtEventsTab").unbindItems();let t=this.byId("EmployeeListCombo").getSelectedKeys();this.byId("EmployeeListCombo").removeSelectedKeys(t)}},onSectionChange:function(e){var t=e.getParameter("changedItem");var n=e.getParameter("selected");if(n){a[t.getKey()]=t.getKey();m[t.getKey()]=new l("EmployeeID",s.EQ,""+t.getKey()+"")}else{delete a[t.getKey()];delete m[t.getKey()]}},onSectionFinish:function(e){const t="/OvertimeEventSet";console.log(Object.values(m));console.log(Object.values(a));r=Object.values(a);u=Object.values(m);if(Object.values(m).length>0){this.byId("OvtEventsTab").bindItems({path:t,model:"employees",template:this.byId("TableItemTemplate"),templateShareable:true,filters:u})}else{this.byId("OvtEventsTab").unbindItems()}},onSelectedAp:function(e){const t=e.getParameter("selected");const l=e.getSource();const s=l.getParent();const n=s.getCells();const o=e.getSource().getBindingContext("employees").getObject();if(t){this._apElementCounter+=1;n[7].setEnabled(false);c[o.EntryKey]=o;this._toggleApBtn()}else{this._apElementCounter-=1;delete c[o.EntryKey];n[7].setEnabled(true);this._toggleApBtn()}},onSelectedRe:function(e){const t=e.getParameter("selected");const l=e.getSource();const s=l.getParent();const n=s.getCells();const o=e.getSource().getBindingContext("employees").getObject();if(t){this._reElementCounter+=1;d[o.EntryKey]=o;n[6].setEnabled(false);this._toggleReBtn()}else{this._reElementCounter-=1;delete d[o.EntryKey];n[6].setEnabled(true);this._toggleReBtn()}},_toggleApBtn:function(){let e=this.byId("apBtn");let t=this._apElementCounter+this._reElementCounter;if(t>0&&e.getEnabled()===false){e.setEnabled(true)}else if(t===0&&e.getEnabled()===true){e.setEnabled(false)}},_toggleReBtn:function(){let e=this.byId("apBtn");let t=this._apElementCounter+this._reElementCounter;if(t>0&&e.getEnabled()===false){e.setEnabled(true)}else if(t===0&&e.getEnabled()===true){e.setEnabled(false)}},onSelectAllAp:function(){const e=this.byId("OvtEventsTab");const t=e.getItems();t.forEach(e=>{const t=e.getCells();const l=t[6];const s=l.getSelected();const n=l.getEnabled();const o=t[7];const i=o.getSelected();const r=o.getEnabled();const a=e.getBindingContext("employees").getObject();if(!this._ApSelectedAll&&!this._ReSelectedAll){if(!s){this._apElementCounter+=1;o.setSelected(false);l.setEnabled(true);c[a.EntryKey]=a;if(i){this._reElementCounter-=1;delete d[a.EntryKey]}}l.setSelected(true);o.setEnabled(false)}else if(this._ApSelectedAll&&!this._ReSelectedAll){if(s){this._apElementCounter-=1;delete c[a.EntryKey]}l.setSelected(false);o.setEnabled(true)}else if(!this._ApSelectedAll&&this._ReSelectedAll){if(!s){this._apElementCounter+=1;c[a.EntryKey]=a}l.setSelected(true);l.setEnabled(true);if(i){this._reElementCounter-=1;delete d[a.EntryKey]}o.setEnabled(false);o.setSelected(false)}});if(!this._ApSelectedAll&&!this._ReSelectedAll){this._ApSelectedAll=true}else if(this._ApSelectedAll&&!this._ReSelectedAll){this._ApSelectedAll=false}else if(!this._ApSelectedAll&&this._ReSelectedAll){this._ApSelectedAll=true;this._ReSelectedAll=false}this._toggleApBtn()},onSelectAllRe:function(){const e=this.byId("OvtEventsTab");const t=e.getItems();t.forEach(e=>{const t=e.getCells();const l=t[6];const s=l.getSelected();const n=l.getEnabled();const o=t[7];const i=o.getSelected();const r=o.getEnabled();const a=e.getBindingContext("employees").getObject();if(!this._ApSelectedAll&&!this._ReSelectedAll){if(!i){this._reElementCounter+=1;l.setSelected(false);o.setEnabled(true);d[a.EntryKey]=a;if(s){this._apElementCounter-=1;delete c[a.EntryKey]}}o.setSelected(true);l.setEnabled(false)}else if(!this._ApSelectedAll&&this._ReSelectedAll){if(i){this._reElementCounter-=1;delete d[a.EntryKey]}o.setSelected(false);l.setEnabled(true)}else if(this._ApSelectedAll&&!this._ReSelectedAll){if(!i){this._reElementCounter+=1;d[a.EntryKey]=a}o.setSelected(true);o.setEnabled(true);if(s){this._apElementCounter-=1;delete c[a.EntryKey]}l.setEnabled(false);l.setSelected(false)}});if(!this._ApSelectedAll&&!this._ReSelectedAll){this._ReSelectedAll=true}else if(!this._ApSelectedAll&&this._ReSelectedAll){this._ReSelectedAll=false}else if(this._ApSelectedAll&&!this._ReSelectedAll){this._ReSelectedAll=true;this._ApSelectedAll=false}this._toggleApBtn()},onAppAll:function(){i.warning("Êtes-vous sûr de soumettre tous les événements marqués?",{actions:[i.Action.YES,i.Action.NO],emphasizedAction:i.Action.YES,onClose:e=>{if(i.Action.YES===e){console.log(d);console.log(c);let e="";let t=this.getOwnerComponent().getModel("employees");for(const l in c){let s=c[l];e=`/OvertimeEventSet(EmployeeID='${s.EmployeeID}',SeqNum='${s.SeqNum}',WageType='${s.WageType}',EndDay='${s.EndDay}',StartDay='${s.StartDay}')`;s.Approval=1;console.log(E);t.update(e,s,{success:e=>{h=true},error:e=>{let t=JSON.parse(e.responseText);let l=t.error.message.value;let s=t.error.code;let n=s.match(/(\d+)$/);let o=l.match(/\d{8}/gm);if(n[0]==="023"&&E===false){E=true;h=false;i.error(l)}else if(n[0]==="022"){if(p[o[0]]===undefined){p[o[0]]=true;h=false;i.error(l)}}}});delete c[l]}for(const l in d){let s=d[l];e=`/OvertimeEventSet(EmployeeID='${s.EmployeeID}',SeqNum='${s.SeqNum}',WageType='${s.WageType}',EndDay='${s.EndDay}',StartDay='${s.StartDay}')`;s.Approval=2;console.log(s);t.update(e,s,{success:e=>{h=true},error:e=>{let t=JSON.parse(e.responseText);let l=t.error.message.value;let s=t.error.code;let n=s.match(/(\d+)$/);let o=l.match(/\d{8}/gm);if(n[0]==="023"&&E===false){E=true;h=false;i.error(l)}else if(n[0]==="022"){if(p[o[0]]===undefined){p[o[0]]=true;h=false;i.error(l)}}}});delete d[l]}if(this.bUpdateError===true){let e=this.byId("OvtEventsTab");let t=e.getItems();t.forEach(t=>{let l=t.getCells();if(l[6].getSelected()||l[7].getSelected()){e.removeItem(t)}});i.success("Tous les événements ont été traités")}}}})}})});
},
	"DIOR/FR/zfrswbdioovt/i18n/i18n.properties":'title=Validation des Heures Exc\\u00e9dentaires\nappTitle=Validation heures exc\\u00e9dentaires\nappDescription=Validation des Heures Exc\\u00e9dentaires\n\n# Table columns\nColPernr = Matricule\nColBegda = Date\nColBeguz = Heure d\\u00e9but\nColEnduz = Heure fin\nColStdaz = Nbre d\\u2019heures \nColWageType = Compensation\nColValidation = Valider Tout\nColRejection = Refuser Tout\n\n# Table body\nNoData=Aucune donn\\u00e9e disponible',
	"DIOR/FR/zfrswbdioovt/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"DIOR.FR.zfrswbdioovt","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","sourceTemplate":{"id":"ui5template.basicSAPUI5ApplicationProject","version":"1.40.12"},"dataSources":{"DiorOData":{"uri":"/sap/opu/odata/sap/ZFRDIO_OVT_SRV/","type":"OData","settings":{"odataVersion":"2.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"rootView":{"viewName":"DIOR.FR.zfrswbdioovt.view.Main","type":"XML","async":true,"id":"Main"},"dependencies":{"minUI5Version":"1.65.6","libs":{"sap.ui.layout":{},"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"DIOR.FR.zfrswbdioovt.i18n.i18n"}},"employees":{"dataSource":"DiorOData","preload":true}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"DIOR.FR.zfrswbdioovt.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"RouteMain","pattern":"RouteMain","target":["TargetMain"]}],"targets":{"TargetMain":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"Main","viewName":"Main"}}}},"sap.platform.abap":{"uri":"/sap/bc/ui5_ui5/sap/zfrsw_bsp_dio_e/webapp","_version":"1.1.0"},"sap.platform.hcp":{"uri":"webapp","_version":"1.1.0"}}',
	"DIOR/FR/zfrswbdioovt/model/models.js":function(){sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"DIOR/FR/zfrswbdioovt/service/data.json":'{"Employees":[{"ID":"12345678","FullName":"Manuel Rentero"},{"ID":"00000008","FullName":"Javi Bengoechea"},{"ID":"00030001","FullName":"Xavi Hernandez"},{"ID":"01320008","FullName":"Christian Dior"}]}',
	"DIOR/FR/zfrswbdioovt/view/Main.view.xml":'<mvc:View controllerName="DIOR.FR.zfrswbdioovt.controller.Main" xmlns:mvc="sap.ui.core.mvc" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core"\n\tdisplayBlock="true" xmlns="sap.m"><App id="app" class="diorAppCustom"><pages><Page id="page" title="{i18n>title}" ><content><l:HorizontalLayout class="sapUiContentPadding"><MultiComboBox id="EmployeeListCombo" width="43rem" items="{ path: \'employees>/EmployeesSet\', mode: \'OneWay\' }" showSecondaryValues="true"\n\t\t\t\t\t\t\tselectionFinish=".onSectionFinish" selectionChange=".onSectionChange"><core:ListItem key="{employees>ID}" text="{employees>FullName}" additionalText="{employees>ID}"/></MultiComboBox><Button id="selectAllBtn" icon="sap-icon://company-view" text="Sélectionner tous les employés" press="onSelectAllEmp"></Button></l:HorizontalLayout><l:VerticalLayout width="100%"><Table id="OvtEventsTab" inset="false" sticky="ColumnHeaders" noDataText="{i18n>NoData}"><columns><Column><Text text="{i18n>ColPernr}"/></Column><Column><Text text="{i18n>ColBegda}"/></Column><Column ><Text text="{i18n>ColBeguz}"/></Column><Column ><Text text="{i18n>ColEnduz}"/></Column><Column><Text text="{i18n>ColStdaz}"/></Column><Column><Text text="{i18n>ColWageType}"/></Column><Column><HBox alignItems="Center"><Button class="sapUiTinyMarginEnd" icon="sap-icon://multiselect-all" press=".onSelectAllAp"/><Text text="{i18n>ColValidation}"/></HBox></Column><Column><HBox alignItems="Center"><Button class="sapUiTinyMarginEnd" icon="sap-icon://survey" press=".onSelectAllRe"/><Text text="{i18n>ColRejection}"/></HBox></Column></columns><dependents><ColumnListItem id="TableItemTemplate" vAlign="Middle"><cells><ObjectIdentifier title="{employees>FullName}" text="{employees>EmployeeID}"/><Text\n\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'employees>StartDay\', type: \'sap.ui.model.type.Date\', formatOptions: { pattern:\'dd MMM yyyy\' ,source: { pattern: \'yyyyMMdd\' } }}"/><Text\n\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'employees>StartTime\', type: \'sap.ui.model.type.Time\', formatOptions:{ pattern:\'HH\\\'h\\\'mm\' ,source: { pattern: \'HHmmss\' } }}"/><Text\n\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'employees>EndTime\', type: \'sap.ui.model.type.Time\', formatOptions:{ pattern:\'HH\\\'h\\\'mm\' ,source: { pattern: \'HHmmss\' } }}"/><Text text="{path: \'employees>NumberOfHours\', type: \'sap.ui.model.type.Float\', formatOptions: { decimalSeparator: \',\' }}"/><Text text="{employees>WageTypeText}"/><CheckBox selected="false" select=".onSelectedAp"/><CheckBox selected="false" select=".onSelectedRe"/></cells></ColumnListItem></dependents></Table></l:VerticalLayout></content><footer><Toolbar id="footerToolbar" width="100%"><ToolbarSpacer/><Button id="apBtn" text="Sauvegarder" press=".onAppAll" icon="sap-icon://save" type="Default" enabled="false"/></Toolbar></footer></Page></pages></App></mvc:View>'
}});
